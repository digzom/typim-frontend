# ADR-004: Canonical Mobile Layout State to CSS Mapping

## Status

Accepted

## Context

Mobile pane visibility previously relied on mixed classes and `data-layout` values, causing selector/state drift and non-deterministic toggling.

## Decision

Adopt canonical DOM attributes: `data-layout='mobile'` and `data-mobile-pane='editor|preview'` from `LayoutManager`. Keep desktop layout attributes (`split|single|focus`) unchanged.

## Consequences

### Positive

- Mobile pane switching is deterministic and testable.
- No horizontal overflow checks can target a single contract path.

### Negative

- Transitional compatibility selectors must be retained briefly.

### Neutral

- Desktop layout mode behavior remains unchanged.

## Related

- `src/ui/layout/index.ts`
- `src/styles/main.css`
- `tests/e2e/layout.spec.ts`
- `tests/e2e/invariants.spec.ts`
